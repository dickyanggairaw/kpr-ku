<!DOCTYPE html>
<html lang="id">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="color-scheme" content="light dark">
    <title>Simulasi KPR</title>
    <link rel="stylesheet" href="style.css">
</head>

<body>
    <!-- Theme Toggle Button -->
    <button id="themeToggle" class="theme-toggle" onclick="toggleTheme()" aria-label="Toggle theme">
        <span class="theme-icon">‚òÄÔ∏è</span>
    </button>

    <!-- Hero Section -->
    <section class="hero">
        <div class="hero-content">
            <h1 class="hero-title">Simulasi KPR</h1>
            <p class="hero-tagline">Hitung cicilan KPR Anda dengan mudah dan akurat</p>
        </div>
    </section>

    <!-- Calculator Section -->
    <section class="calculator-section">
        <div class="container">
            <div class="form-section">
                <h2>Input Data KPR</h2>
                <form id="kprForm">
                    <!-- Grid Layout untuk Input Utama -->
                    <div class="form-grid">
                        <div class="form-group">
                            <label for="hargaProperti">Harga Properti</label>
                            <input type="text" id="hargaProperti" required placeholder="500.000.000">
                        </div>

                        <div class="form-group">
                            <label for="uangMuka">Uang Muka</label>
                            <input type="text" id="uangMuka" required placeholder="100.000.000">
                        </div>

                        <div class="form-group">
                            <label for="jangkaWaktu">Jangka Waktu</label>
                            <input type="number" id="jangkaWaktu" required placeholder="15 Tahun" min="1" max="30">
                        </div>

                        <div class="form-group">
                            <label for="jenisBunga">Jenis Bunga</label>
                            <select id="jenisBunga" required>
                                <option value="">Pilih Jenis Bunga</option>
                                <option value="fix">Bunga Fix</option>
                                <option value="berjenjang">Bunga Fix Berjenjang</option>
                            </select>
                        </div>
                    </div>

                    <div id="bungaFixSection" class="bunga-section" style="display: none;">
                        <div class="form-group">
                            <label for="bungaFix">Bunga Fix (% per tahun)</label>
                            <input type="number" id="bungaFix" step="0.01" placeholder="8.5">
                        </div>
                        <div class="form-group">
                            <label for="periodeFix">Periode Bunga Fix (Tahun)</label>
                            <input type="number" id="periodeFix" min="1"
                                placeholder="Kosongkan jika fix untuk seluruh periode">
                            <small style="color: #666; display: block; margin-top: 5px;">*Kosongkan jika bunga fix
                                berlaku
                                untuk seluruh periode pinjaman</small>
                        </div>
                        <div id="bungaFloatingSection"
                            style="display: none; margin-top: 15px; padding: 15px; background: #e3f2fd; border-radius: 8px; border-left: 4px solid #2196f3;">
                            <h4 style="color: #1976d2; margin-bottom: 15px;">Pengaturan Bunga Floating</h4>
                            <div class="form-group">
                                <label for="bungaFloating">Bunga Floating (% per tahun)</label>
                                <input type="number" id="bungaFloating" step="0.01" placeholder="9.5">
                                <small style="color: #666; display: block; margin-top: 5px;">*Bunga yang berlaku setelah
                                    periode fix berakhir</small>
                            </div>
                        </div>
                    </div>


                    <div id="bungaBerjenjangSection" class="bunga-section" style="display: none;">
                        <h3>Pengaturan Bunga Berjenjang</h3>
                        <div id="berjenjangContainer">
                            <div class="berjenjang-item">
                                <div class="form-group">
                                    <label>Tahun Ke-</label>
                                    <input type="number" class="tahun-ke" min="1" placeholder="1-3" required>
                                </div>
                                <div class="form-group">
                                    <label>Sampai Tahun Ke-</label>
                                    <input type="number" class="sampai-tahun" min="1" placeholder="3" required>
                                </div>
                                <div class="form-group">
                                    <label>Bunga (% per tahun)</label>
                                    <input type="number" class="bunga-persen" step="0.01" placeholder="6.5" required>
                                </div>
                            </div>
                        </div>
                        <button type="button" id="tambahBerjenjang" class="btn-secondary">+ Tambah Jenjang</button>

                        <div id="bungaFloatingBerjenjangSection"
                            style="display: none; margin-top: 20px; padding: 15px; background: #e3f2fd; border-radius: 8px; border-left: 4px solid #2196f3;">
                            <h4 style="color: #1976d2; margin-bottom: 15px;">Bunga Floating Setelah Jenjang Terakhir
                            </h4>
                            <div class="form-group">
                                <label for="bungaFloatingBerjenjang">Bunga Floating (% per tahun)</label>
                                <input type="number" id="bungaFloatingBerjenjang" step="0.01" placeholder="9.5">
                                <small style="color: #666; display: block; margin-top: 5px;">*Opsional: Bunga yang
                                    berlaku
                                    setelah jenjang terakhir berakhir</small>
                            </div>
                        </div>
                    </div>

                    <button type="submit" class="btn-primary">Hitung KPR</button>
                </form>
            </div>

            <div id="hasilSection" class="hasil-section" style="display: none;">
                <h2>üìä Hasil Simulasi KPR</h2>

                <!-- Ringkasan Utama -->
                <div
                    style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); padding: 25px; border-radius: 15px; margin-bottom: 25px; color: white; box-shadow: 0 8px 16px rgba(102, 126, 234, 0.3);">
                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 20px;">
                        <div style="text-align: center;">
                            <div style="font-size: 0.85em; opacity: 0.9; margin-bottom: 5px;">üí∞ Cicilan per Bulan</div>
                            <div id="cicilanPerBulan" style="font-size: 1.5em; font-weight: 700;">-</div>
                        </div>
                        <div style="text-align: center;">
                            <div style="font-size: 0.85em; opacity: 0.9; margin-bottom: 5px;">üìÖ Jangka Waktu</div>
                            <div id="jangkaWaktuInfo" style="font-size: 1.5em; font-weight: 700;">-</div>
                        </div>
                        <div style="text-align: center;">
                            <div style="font-size: 0.85em; opacity: 0.9; margin-bottom: 5px;">üìà Bunga Efektif</div>
                            <div id="bungaEfektif" style="font-size: 1.5em; font-weight: 700;">-</div>
                        </div>
                    </div>
                </div>

                <!-- Detail Pinjaman -->
                <div
                    style="background: white; padding: 20px; border-radius: 10px; margin-bottom: 20px; box-shadow: 0 2px 8px rgba(0,0,0,0.1);">
                    <h3
                        style="color: #667eea; margin-bottom: 15px; border-bottom: 2px solid #667eea; padding-bottom: 10px;">
                        üí≥ Detail Pinjaman</h3>
                    <div class="hasil-info">
                        <div class="info-item">
                            <span class="label">Jumlah Pinjaman:</span>
                            <span id="jumlahPinjaman" class="value">-</span>
                        </div>
                        <div class="info-item">
                            <span class="label">Total Bunga:</span>
                            <span id="totalBunga" class="value">-</span>
                        </div>
                        <div class="info-item">
                            <span class="label">Rasio Bunga:</span>
                            <span id="rasioBunga" class="value">-</span>
                        </div>
                        <div class="info-item">
                            <span class="label">Total Pembayaran Awal:</span>
                            <span id="totalPembayaranAwal" class="value">-</span>
                        </div>
                    </div>
                </div>

                <!-- Detail Pelunasan (jika ada) -->
                <div id="detailPelunasanSection"
                    style="display: none; background: #f0f9ff; padding: 20px; border-radius: 10px; margin-bottom: 20px; box-shadow: 0 2px 8px rgba(0,0,0,0.1); border-left: 5px solid #28a745;">
                    <h3
                        style="color: #28a745; margin-bottom: 15px; border-bottom: 2px solid #28a745; padding-bottom: 10px;">
                        üíµ Detail Pelunasan</h3>
                    <div class="hasil-info">
                        <div class="info-item" id="totalPelunasanItem">
                            <span class="label">Total Pelunasan:</span>
                            <span id="totalPelunasanSebagian" class="value"
                                style="color: #28a745; font-weight: 700;">-</span>
                        </div>
                        <div class="info-item" id="totalPembayaranAkhirItem">
                            <span class="label">Total Pembayaran Akhir:</span>
                            <span id="totalPembayaranAkhir" class="value">-</span>
                        </div>
                        <div class="info-item" id="pengheematanPembayaranItem">
                            <span class="label">üí∞ Penghematan Pembayaran:</span>
                            <span id="pengheematanPembayaran" class="value"
                                style="color: #28a745; font-weight: 700; font-size: 1.1em;">-</span>
                        </div>
                        <div class="info-item" id="persentasePengheematanItem">
                            <span class="label">Persentase Hemat:</span>
                            <span id="persentasePenghematan" class="value"
                                style="color: #28a745; font-weight: 700;">-</span>
                        </div>
                    </div>
                </div>

                <!-- Info Struktur Bunga -->
                <div id="strukturBungaInfo"
                    style="background: #fff8e1; padding: 15px; border-radius: 10px; margin-bottom: 20px; border-left: 5px solid #ffc107;">
                    <h4 style="color: #f57c00; margin-bottom: 10px;">üìä Struktur Bunga</h4>
                    <div id="strukturBungaDetail" style="font-size: 0.9em; color: #666;"></div>
                </div>

                <!-- Ringkasan Pelunasan -->
                <div id="ringkasanPelunasan" style="display: none; margin-bottom: 30px;">
                    <div
                        style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); padding: 20px; border-radius: 15px 15px 0 0; box-shadow: 0 4px 12px rgba(102, 126, 234, 0.3);">
                        <h3
                            style="color: white; margin: 0; font-size: 1.3em; display: flex; align-items: center; gap: 10px;">
                            <span
                                style="background: rgba(255,255,255,0.2); padding: 8px 12px; border-radius: 8px;">üìã</span>
                            Riwayat Pelunasan
                            <span
                                style="background: rgba(255,255,255,0.3); color: white; padding: 4px 12px; border-radius: 20px; font-size: 0.8em; margin-left: auto;"
                                id="jumlahKaliPelunasan">0</span>
                        </h3>
                    </div>
                    <div
                        style="background: #f8f9fa; padding: 20px; border-radius: 0 0 15px 15px; box-shadow: 0 4px 12px rgba(0,0,0,0.1);">
                        <div id="listPelunasan"></div>
                    </div>
                </div>

                <div class="tabel-angsuran">
                    <h3>Tabel Angsuran</h3>
                    <div class="table-container">
                        <table id="tabelAngsuran">
                            <thead>
                                <tr>
                                    <th>Bulan</th>
                                    <th>Angsuran/Bulan</th>
                                    <th>Pokok</th>
                                    <th>Bunga</th>
                                    <th>Sisa Pinjaman</th>
                                    <th>Aksi</th>
                                </tr>
                            </thead>
                            <tbody id="tabelBody">
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>

        <!-- Modal Pelunasan -->
        <div id="pelunasanModal" class="modal">
            <div class="modal-content">
                <span class="close">&times;</span>
                <h2>Pelunasan</h2>
                <div id="modalBody">
                    <div class="form-group">
                        <label for="jenisPelunasan">Jenis Pelunasan</label>
                        <select id="jenisPelunasan">
                            <option value="sebagian">Pelunasan Sebagian</option>
                            <option value="penuh">Pelunasan Penuh</option>
                        </select>
                    </div>
                    <div id="jumlahPelunasanGroup" class="form-group">
                        <label for="jumlahPelunasan">Jumlah Pelunasan (Rp)</label>
                        <input type="text" id="jumlahPelunasan" placeholder="50.000.000">
                    </div>
                    <div class="form-group">
                        <label for="tagAkuntansi">Tag Akuntansi (Opsional)</label>
                        <input type="text" id="tagAkuntansi" placeholder="Contoh: THR 2024, Bonus Tahunan, dll">
                        <small style="color: #666; display: block; margin-top: 5px;">*Untuk keperluan
                            pencatatan/akuntansi</small>
                    </div>
                    <div class="info-item">
                        <span class="label">Sisa Pinjaman Saat Ini:</span>
                        <span id="sisaPinjamanModal" class="value">-</span>
                    </div>
                    <div class="info-item">
                        <span class="label">Cicilan Saat Ini:</span>
                        <span id="cicilanSekarangModal" class="value">-</span>
                    </div>
                    <div id="infoPelunasanResult"
                        style="display: none; margin-top: 20px; padding: 15px; background: #e8f5e9; border-radius: 8px; border-left: 4px solid #4caf50;">
                        <h4 style="margin-bottom: 10px; color: #1b5e20;">Informasi Setelah Pelunasan:</h4>
                        <div class="info-item" style="color: #1b5e20;">
                            <span class="label">Cicilan Sebelumnya:</span>
                            <span id="cicilanSebelum" class="value">-</span>
                        </div>
                        <div class="info-item" style="color: #1b5e20;">
                            <span class="label">Cicilan Baru:</span>
                            <span id="cicilanSesudah" class="value">-</span>
                        </div>
                        <div class="info-item" style="color: #1b5e20;">
                            <span class="label">Selisih Cicilan:</span>
                            <span id="selisihCicilan" class="value">-</span>
                        </div>
                        <div class="info-item" style="color: #1b5e20;">
                            <span class="label">Proporsi Pokok Baru:</span>
                            <span id="proporsiPokok" class="value">-</span>
                        </div>
                        <div class="info-item" style="color: #1b5e20;">
                            <span class="label">Proporsi Bunga Baru:</span>
                            <span id="proporsiBunga" class="value">-</span>
                        </div>
                    </div>
                    <button id="btnProsesPelunasan" class="btn-primary">Proses Pelunasan</button>
                </div>
            </div>
        </div>
    </section>
    <!-- End Calculator Section -->

    <!-- Footer -->
    <footer class="footer">
        <div class="footer-content">
            <p class="footer-brand">KPRku</p>
            <p class="footer-version">Version 1.0.0</p>
            <p class="footer-copyright">&copy; 2025 KPRku. Simulasi KPR Online.</p>
        </div>
    </footer>

    <script type="module" src="app.js"></script>
</body>

</html>